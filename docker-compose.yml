version: "3.9"

services:
  web:
    build: .
    command: > 
      sh -c "python manage.py migrate && 
      python manage.py runserver 0.0.0.0:8000"

    volumes:
      - .:/app
      - sqlite_data:/app/data

    ports:
      - "8000:8000"

    environment:
      DJANGO_DB_PATH: /app/data/db.sqlite3

    restart: always

    container_name: django_web_container



volumes:
  sqlite_data: